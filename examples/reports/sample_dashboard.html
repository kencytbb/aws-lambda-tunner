<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Lambda Performance Dashboard</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .dashboard-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        .dashboard-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .dashboard-title {
            color: #2c3e50;
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .dashboard-subtitle {
            color: #7f8c8d;
            font-size: 1.1em;
            margin-bottom: 20px;
        }

        .function-info {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        .info-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #5a6c7d;
            font-weight: 500;
        }

        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .kpi-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .kpi-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
        }

        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .kpi-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .kpi-title {
            font-size: 0.9em;
            font-weight: 600;
            color: #7f8c8d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .kpi-icon {
            font-size: 1.2em;
            color: #667eea;
        }

        .kpi-value {
            font-size: 2em;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .kpi-change {
            font-size: 0.8em;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .kpi-change.positive {
            color: #27ae60;
        }

        .kpi-change.negative {
            color: #e74c3c;
        }

        .controls-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .controls-title {
            font-size: 1.2em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .control-label {
            font-size: 0.9em;
            font-weight: 500;
            color: #5a6c7d;
        }

        .control-input {
            padding: 8px 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 0.9em;
            transition: border-color 0.3s ease;
        }

        .control-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .btn.secondary {
            background: #6c757d;
        }

        .btn.secondary:hover {
            background: #545b62;
        }

        .chart-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }

        .chart-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .chart-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chart-controls {
            display: flex;
            gap: 10px;
        }

        .chart-btn {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8em;
            transition: all 0.3s ease;
        }

        .chart-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .chart-container {
            height: 300px;
        }

        .chart-container.large {
            height: 400px;
        }

        .secondary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-bottom: 25px;
        }

        .insights-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .insights-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .insight-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 12px;
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
        }

        .insight-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .insight-item.critical {
            border-left-color: #e74c3c;
        }

        .insight-item.warning {
            border-left-color: #f39c12;
        }

        .insight-item.success {
            border-left-color: #27ae60;
        }

        .insight-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .insight-title-text {
            font-weight: 600;
            color: #2c3e50;
        }

        .insight-badge {
            background: #667eea;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7em;
            font-weight: 500;
            text-transform: uppercase;
        }

        .insight-badge.critical {
            background: #e74c3c;
        }

        .insight-badge.warning {
            background: #f39c12;
        }

        .insight-badge.success {
            background: #27ae60;
        }

        .insight-description {
            color: #5a6c7d;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .recommendations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .recommendation-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .recommendation-card:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }

        .recommendation-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .recommendation-title {
            font-weight: 600;
            color: #2c3e50;
            font-size: 1em;
        }

        .priority-badge {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7em;
            font-weight: 500;
            text-transform: uppercase;
        }

        .priority-badge.high {
            background: #e74c3c;
        }

        .priority-badge.medium {
            background: #f39c12;
        }

        .priority-badge.low {
            background: #27ae60;
        }

        .recommendation-description {
            color: #5a6c7d;
            font-size: 0.9em;
            line-height: 1.4;
            margin-bottom: 12px;
        }

        .recommendation-impact {
            background: rgba(102, 126, 234, 0.1);
            border-radius: 6px;
            padding: 8px 12px;
            font-size: 0.8em;
            color: #667eea;
            font-weight: 500;
        }

        .footer-stats {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        .realtime-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(39, 174, 96, 0.1);
            color: #27ae60;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 500;
            margin-bottom: 20px;
        }

        .pulse {
            width: 8px;
            height: 8px;
            background: #27ae60;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.2);
                opacity: 0.7;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .dashboard-container {
                padding: 15px;
            }
            
            .chart-grid {
                grid-template-columns: 1fr;
            }
            
            .secondary-grid {
                grid-template-columns: 1fr;
            }
            
            .kpi-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 480px) {
            .kpi-grid {
                grid-template-columns: 1fr;
            }
        }

        .tab-container {
            margin-bottom: 20px;
        }

        .tab-buttons {
            display: flex;
            gap: 2px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 4px;
        }

        .tab-btn {
            flex: 1;
            background: transparent;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            color: #5a6c7d;
        }

        .tab-btn.active {
            background: white;
            color: #667eea;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <div class="dashboard-header">
            <div class="realtime-indicator">
                <div class="pulse"></div>
                <span>Live Dashboard - Last updated: <span id="lastUpdate">just now</span></span>
            </div>
            <h1 class="dashboard-title">
                <i class="fas fa-tachometer-alt"></i>
                AWS Lambda Performance Dashboard
            </h1>
            <div class="dashboard-subtitle">Real-time monitoring and optimization insights</div>
            <div class="function-info">
                <div class="info-item">
                    <i class="fas fa-function"></i>
                    <span>web-api-handler</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-server"></i>
                    <span>1024 MB</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-clock"></i>
                    <span>Python 3.9</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-globe"></i>
                    <span>us-east-1</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-chart-line"></i>
                    <span>Optimized</span>
                </div>
            </div>
        </div>

        <!-- KPI Grid -->
        <div class="kpi-grid">
            <div class="kpi-card">
                <div class="kpi-header">
                    <div class="kpi-title">Average Response Time</div>
                    <i class="fas fa-stopwatch kpi-icon"></i>
                </div>
                <div class="kpi-value">539.2ms</div>
                <div class="kpi-change positive">
                    <i class="fas fa-arrow-down"></i>
                    <span>72.2% faster</span>
                </div>
            </div>

            <div class="kpi-card">
                <div class="kpi-header">
                    <div class="kpi-title">P95 Latency</div>
                    <i class="fas fa-chart-line kpi-icon"></i>
                </div>
                <div class="kpi-value">845.7ms</div>
                <div class="kpi-change positive">
                    <i class="fas fa-arrow-down"></i>
                    <span>70.8% improvement</span>
                </div>
            </div>

            <div class="kpi-card">
                <div class="kpi-header">
                    <div class="kpi-title">Monthly Cost</div>
                    <i class="fas fa-dollar-sign kpi-icon"></i>
                </div>
                <div class="kpi-value">$69.80</div>
                <div class="kpi-change positive">
                    <i class="fas fa-arrow-down"></i>
                    <span>28.7% savings</span>
                </div>
            </div>

            <div class="kpi-card">
                <div class="kpi-header">
                    <div class="kpi-title">Cold Start Rate</div>
                    <i class="fas fa-thermometer-quarter kpi-icon"></i>
                </div>
                <div class="kpi-value">20%</div>
                <div class="kpi-change negative">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Consider provisioned concurrency</span>
                </div>
            </div>

            <div class="kpi-card">
                <div class="kpi-header">
                    <div class="kpi-title">Error Rate</div>
                    <i class="fas fa-shield-alt kpi-icon"></i>
                </div>
                <div class="kpi-value">0.0%</div>
                <div class="kpi-change positive">
                    <i class="fas fa-check"></i>
                    <span>Excellent reliability</span>
                </div>
            </div>

            <div class="kpi-card">
                <div class="kpi-header">
                    <div class="kpi-title">Efficiency Score</div>
                    <i class="fas fa-star kpi-icon"></i>
                </div>
                <div class="kpi-value">10.0/10</div>
                <div class="kpi-change positive">
                    <i class="fas fa-crown"></i>
                    <span>Optimal configuration</span>
                </div>
            </div>
        </div>

        <!-- Controls Panel -->
        <div class="controls-panel">
            <div class="controls-title">
                <i class="fas fa-sliders-h"></i>
                Interactive Controls
            </div>
            <div class="controls-grid">
                <div class="control-group">
                    <label class="control-label">Memory Configuration (MB)</label>
                    <select class="control-input" id="memorySelect">
                        <option value="256">256 MB</option>
                        <option value="512">512 MB</option>
                        <option value="1024" selected>1024 MB (Optimal)</option>
                        <option value="1536">1536 MB</option>
                        <option value="2048">2048 MB</option>
                        <option value="3008">3008 MB</option>
                    </select>
                </div>
                <div class="control-group">
                    <label class="control-label">Traffic Volume (invocations/month)</label>
                    <select class="control-input" id="trafficSelect">
                        <option value="100000">100K - Startup</option>
                        <option value="500000">500K - Growing</option>
                        <option value="2000000" selected>2M - Enterprise</option>
                        <option value="10000000">10M - High Volume</option>
                    </select>
                </div>
                <div class="control-group">
                    <label class="control-label">Time Range</label>
                    <select class="control-input" id="timeRangeSelect">
                        <option value="1h">Last Hour</option>
                        <option value="24h" selected>Last 24 Hours</option>
                        <option value="7d">Last 7 Days</option>
                        <option value="30d">Last 30 Days</option>
                    </select>
                </div>
                <div class="control-group">
                    <label class="control-label">Actions</label>
                    <div class="btn-group">
                        <button class="btn" onclick="refreshDashboard()">
                            <i class="fas fa-sync-alt"></i>
                            Refresh
                        </button>
                        <button class="btn secondary" onclick="exportReport()">
                            <i class="fas fa-download"></i>
                            Export
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Chart Grid -->
        <div class="chart-grid">
            <div class="chart-panel">
                <div class="chart-header">
                    <div class="chart-title">
                        <i class="fas fa-chart-area"></i>
                        Performance Timeline
                    </div>
                    <div class="chart-controls">
                        <button class="chart-btn active" onclick="switchChart('performance', 'duration')">Duration</button>
                        <button class="chart-btn" onclick="switchChart('performance', 'memory')">Memory</button>
                        <button class="chart-btn" onclick="switchChart('performance', 'cost')">Cost</button>
                    </div>
                </div>
                <div class="chart-container large" id="performanceTimeline"></div>
            </div>

            <div class="chart-panel">
                <div class="chart-header">
                    <div class="chart-title">
                        <i class="fas fa-chart-pie"></i>
                        Memory Utilization
                    </div>
                </div>
                <div class="chart-container" id="memoryUtilization"></div>
            </div>
        </div>

        <!-- Secondary Charts -->
        <div class="secondary-grid">
            <div class="chart-panel">
                <div class="chart-header">
                    <div class="chart-title">
                        <i class="fas fa-thermometer-quarter"></i>
                        Cold Start Analysis
                    </div>
                </div>
                <div class="chart-container" id="coldStartChart"></div>
            </div>

            <div class="chart-panel">
                <div class="chart-header">
                    <div class="chart-title">
                        <i class="fas fa-balance-scale"></i>
                        Cost Efficiency
                    </div>
                </div>
                <div class="chart-container" id="costEfficiencyChart"></div>
            </div>
        </div>

        <!-- Tabbed Content -->
        <div class="insights-panel">
            <div class="insights-title">
                <i class="fas fa-brain"></i>
                Intelligent Insights & Recommendations
            </div>
            
            <div class="tab-container">
                <div class="tab-buttons">
                    <button class="tab-btn active" onclick="switchTab('insights')">AI Insights</button>
                    <button class="tab-btn" onclick="switchTab('recommendations')">Recommendations</button>
                    <button class="tab-btn" onclick="switchTab('trends')">Trends</button>
                    <button class="tab-btn" onclick="switchTab('alerts')">Alerts</button>
                </div>

                <div id="insights" class="tab-content active">
                    <div class="insight-item success">
                        <div class="insight-header">
                            <div class="insight-title-text">Optimal Configuration Detected</div>
                            <span class="insight-badge success">Success</span>
                        </div>
                        <div class="insight-description">
                            Your current 1024MB configuration achieves the optimal balance between performance and cost. 
                            The system detected a 72.2% performance improvement with 28.7% cost reduction compared to baseline.
                        </div>
                    </div>

                    <div class="insight-item warning">
                        <div class="insight-header">
                            <div class="insight-title-text">Cold Start Impact</div>
                            <span class="insight-badge warning">Monitor</span>
                        </div>
                        <div class="insight-description">
                            20% of requests experience cold starts with an average penalty of 383ms. 
                            Consider implementing provisioned concurrency for critical endpoints requiring consistent sub-second response times.
                        </div>
                    </div>

                    <div class="insight-item">
                        <div class="insight-header">
                            <div class="insight-title-text">Memory Efficiency</div>
                            <span class="insight-badge">Optimized</span>
                        </div>
                        <div class="insight-description">
                            Current memory utilization is at 29.8%, indicating efficient resource allocation. 
                            Further memory increases would result in diminishing returns with higher costs.
                        </div>
                    </div>

                    <div class="insight-item success">
                        <div class="insight-header">
                            <div class="insight-title-text">Cost Optimization</div>
                            <span class="insight-badge success">Achieved</span>
                        </div>
                        <div class="insight-description">
                            Monthly cost optimized to $69.80 (2M invocations), representing $336 annual savings. 
                            ROI is immediate with zero implementation risk.
                        </div>
                    </div>
                </div>

                <div id="recommendations" class="tab-content">
                    <div class="recommendations-grid">
                        <div class="recommendation-card">
                            <div class="recommendation-header">
                                <div class="recommendation-title">Maintain Current Configuration</div>
                                <span class="priority-badge low">Low</span>
                            </div>
                            <div class="recommendation-description">
                                Your 1024MB configuration is optimal. No immediate changes needed.
                            </div>
                            <div class="recommendation-impact">
                                Continue to monitor performance metrics for any changes in workload patterns.
                            </div>
                        </div>

                        <div class="recommendation-card">
                            <div class="recommendation-header">
                                <div class="recommendation-title">Implement Provisioned Concurrency</div>
                                <span class="priority-badge medium">Medium</span>
                            </div>
                            <div class="recommendation-description">
                                Reduce cold start impact for critical endpoints requiring consistent latency.
                            </div>
                            <div class="recommendation-impact">
                                Impact: 100% cold start elimination, +15-20% base cost
                            </div>
                        </div>

                        <div class="recommendation-card">
                            <div class="recommendation-header">
                                <div class="recommendation-title">Set Up Performance Monitoring</div>
                                <span class="priority-badge low">Low</span>
                            </div>
                            <div class="recommendation-description">
                                Implement CloudWatch alarms for proactive performance monitoring.
                            </div>
                            <div class="recommendation-impact">
                                Set alerts for P95 latency > 1000ms and error rate > 1%
                            </div>
                        </div>

                        <div class="recommendation-card">
                            <div class="recommendation-header">
                                <div class="recommendation-title">Optimize Application Code</div>
                                <span class="priority-badge medium">Medium</span>
                            </div>
                            <div class="recommendation-description">
                                Review initialization code and implement connection pooling for additional performance gains.
                            </div>
                            <div class="recommendation-impact">
                                Potential additional 10-20% cold start reduction
                            </div>
                        </div>
                    </div>
                </div>

                <div id="trends" class="tab-content">
                    <div class="chart-container large" id="trendsChart"></div>
                </div>

                <div id="alerts" class="tab-content">
                    <div class="insight-item success">
                        <div class="insight-header">
                            <div class="insight-title-text">All Systems Operational</div>
                            <span class="insight-badge success">Healthy</span>
                        </div>
                        <div class="insight-description">
                            No critical alerts detected. All performance metrics are within optimal ranges.
                        </div>
                    </div>

                    <div class="insight-item">
                        <div class="insight-header">
                            <div class="insight-title-text">Monitoring Active</div>
                            <span class="insight-badge">Info</span>
                        </div>
                        <div class="insight-description">
                            Performance monitoring is active. 60 invocations processed in the last hour with 100% success rate.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer Stats -->
        <div class="footer-stats">
            <p>
                <i class="fas fa-database"></i> 60 total invocations analyzed |
                <i class="fas fa-clock"></i> Last optimization: January 15, 2024 |
                <i class="fas fa-check-circle"></i> 100% success rate |
                <i class="fas fa-piggy-bank"></i> $336 annual savings achieved
            </p>
        </div>
    </div>

    <script>
        // Sample data for charts
        const chartData = {
            performance: {
                duration: {
                    x: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', '24:00'],
                    y: [542, 538, 541, 539, 537, 540, 539],
                    title: 'Average Duration Over Time'
                },
                memory: {
                    x: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', '24:00'],
                    y: [298, 302, 296, 301, 299, 303, 298],
                    title: 'Memory Usage Over Time'
                },
                cost: {
                    x: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', '24:00'],
                    y: [3.486, 3.492, 3.483, 3.488, 3.485, 3.491, 3.486],
                    title: 'Cost Per Invocation Over Time'
                }
            }
        };

        // Initialize dashboard
        function initDashboard() {
            updateLastUpdateTime();
            renderPerformanceTimeline();
            renderMemoryUtilization();
            renderColdStartChart();
            renderCostEfficiencyChart();
            renderTrendsChart();
            
            // Update every 30 seconds
            setInterval(updateLastUpdateTime, 30000);
        }

        function updateLastUpdateTime() {
            document.getElementById('lastUpdate').textContent = new Date().toLocaleTimeString();
        }

        function renderPerformanceTimeline() {
            const data = chartData.performance.duration;
            
            const trace = {
                x: data.x,
                y: data.y,
                type: 'scatter',
                mode: 'lines+markers',
                line: {color: '#667eea', width: 3},
                marker: {size: 8, color: '#667eea'},
                fill: 'tonexty',
                fillcolor: 'rgba(102, 126, 234, 0.1)'
            };

            const layout = {
                title: {
                    text: data.title,
                    font: {size: 14, color: '#2c3e50'}
                },
                xaxis: {title: 'Time'},
                yaxis: {title: 'Duration (ms)'},
                plot_bgcolor: 'rgba(0,0,0,0)',
                paper_bgcolor: 'rgba(0,0,0,0)',
                margin: {t: 50, r: 30, b: 60, l: 60}
            };

            Plotly.newPlot('performanceTimeline', [trace], layout, {responsive: true});
        }

        function renderMemoryUtilization() {
            const data = [
                {
                    values: [29.8, 70.2],
                    labels: ['Used', 'Available'],
                    type: 'pie',
                    hole: 0.6,
                    marker: {
                        colors: ['#667eea', '#e9ecef']
                    },
                    textinfo: 'label+percent',
                    textposition: 'outside'
                }
            ];

            const layout = {
                title: {
                    text: 'Memory Utilization (1024 MB)',
                    font: {size: 14, color: '#2c3e50'}
                },
                showlegend: false,
                plot_bgcolor: 'rgba(0,0,0,0)',
                paper_bgcolor: 'rgba(0,0,0,0)',
                margin: {t: 50, r: 30, b: 30, l: 30}
            };

            Plotly.newPlot('memoryUtilization', data, layout, {responsive: true});
        }

        function renderColdStartChart() {
            const data = [
                {
                    x: ['256MB', '512MB', '1024MB', '1536MB', '2048MB', '3008MB'],
                    y: [1080.1, 690.4, 383.1, 308.9, 263.7, 237.7],
                    type: 'bar',
                    marker: {
                        color: ['#e74c3c', '#f39c12', '#667eea', '#3498db', '#9b59b6', '#95a5a6'],
                        opacity: 0.8
                    }
                }
            ];

            const layout = {
                title: {
                    text: 'Cold Start Penalty by Memory',
                    font: {size: 14, color: '#2c3e50'}
                },
                xaxis: {title: 'Memory Size'},
                yaxis: {title: 'Penalty (ms)'},
                plot_bgcolor: 'rgba(0,0,0,0)',
                paper_bgcolor: 'rgba(0,0,0,0)',
                margin: {t: 50, r: 30, b: 60, l: 60}
            };

            Plotly.newPlot('coldStartChart', data, layout, {responsive: true});
        }

        function renderCostEfficiencyChart() {
            const data = [
                {
                    x: [1936.7, 1037.5, 539.2, 486.4, 442.5, 405.3],
                    y: [4.892, 3.681, 3.486, 4.021, 4.562, 6.234],
                    mode: 'markers+text',
                    type: 'scatter',
                    text: ['256MB', '512MB', '1024MB', '1536MB', '2048MB', '3008MB'],
                    textposition: 'top center',
                    marker: {
                        size: [8, 10, 16, 12, 10, 8],
                        color: ['#e74c3c', '#f39c12', '#27ae60', '#3498db', '#9b59b6', '#95a5a6'],
                        line: {color: '#2c3e50', width: 2}
                    }
                }
            ];

            const layout = {
                title: {
                    text: 'Cost vs Performance',
                    font: {size: 14, color: '#2c3e50'}
                },
                xaxis: {title: 'Duration (ms)'},
                yaxis: {title: 'Cost ($)'},
                plot_bgcolor: 'rgba(0,0,0,0)',
                paper_bgcolor: 'rgba(0,0,0,0)',
                margin: {t: 50, r: 30, b: 60, l: 60}
            };

            Plotly.newPlot('costEfficiencyChart', data, layout, {responsive: true});
        }

        function renderTrendsChart() {
            const data = [
                {
                    x: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                    y: [542, 539, 537, 539],
                    type: 'scatter',
                    mode: 'lines+markers',
                    name: 'Avg Duration',
                    line: {color: '#667eea', width: 3}
                },
                {
                    x: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                    y: [3.49, 3.48, 3.47, 3.49],
                    type: 'scatter',
                    mode: 'lines+markers',
                    name: 'Cost/Invocation',
                    yaxis: 'y2',
                    line: {color: '#27ae60', width: 3}
                }
            ];

            const layout = {
                title: {
                    text: 'Performance & Cost Trends',
                    font: {size: 16, color: '#2c3e50'}
                },
                xaxis: {title: 'Time Period'},
                yaxis: {
                    title: 'Duration (ms)',
                    side: 'left'
                },
                yaxis2: {
                    title: 'Cost ($)',
                    side: 'right',
                    overlaying: 'y'
                },
                plot_bgcolor: 'rgba(0,0,0,0)',
                paper_bgcolor: 'rgba(0,0,0,0)',
                margin: {t: 50, r: 60, b: 60, l: 60}
            };

            Plotly.newPlot('trendsChart', data, layout, {responsive: true});
        }

        function switchChart(chartType, metric) {
            // Update button states
            const buttons = document.querySelectorAll('.chart-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Re-render chart with new data
            if (chartType === 'performance') {
                const data = chartData.performance[metric];
                const trace = {
                    x: data.x,
                    y: data.y,
                    type: 'scatter',
                    mode: 'lines+markers',
                    line: {color: '#667eea', width: 3},
                    marker: {size: 8, color: '#667eea'},
                    fill: 'tonexty',
                    fillcolor: 'rgba(102, 126, 234, 0.1)'
                };

                const layout = {
                    title: {
                        text: data.title,
                        font: {size: 14, color: '#2c3e50'}
                    },
                    xaxis: {title: 'Time'},
                    yaxis: {title: metric === 'duration' ? 'Duration (ms)' : metric === 'memory' ? 'Memory (MB)' : 'Cost ($)'},
                    plot_bgcolor: 'rgba(0,0,0,0)',
                    paper_bgcolor: 'rgba(0,0,0,0)',
                    margin: {t: 50, r: 30, b: 60, l: 60}
                };

                Plotly.newPlot('performanceTimeline', [trace], layout, {responsive: true});
            }
        }

        function switchTab(tabName) {
            // Update button states
            const buttons = document.querySelectorAll('.tab-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Show/hide tab content
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
        }

        function refreshDashboard() {
            // Simulate data refresh
            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Refreshing...';
            btn.disabled = true;

            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.disabled = false;
                updateLastUpdateTime();
                
                // Add some random variation to simulate real data
                const variation = (Math.random() - 0.5) * 10;
                document.querySelector('.kpi-value').textContent = (539.2 + variation).toFixed(1) + 'ms';
            }, 2000);
        }

        function exportReport() {
            // Simulate report export
            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Exporting...';
            btn.disabled = true;

            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.disabled = false;
                alert('Report exported successfully!');
            }, 1500);
        }

        // Event listeners
        document.getElementById('memorySelect').addEventListener('change', function() {
            // Update dashboard based on memory selection
            console.log('Memory changed to:', this.value);
        });

        document.getElementById('trafficSelect').addEventListener('change', function() {
            // Update cost projections based on traffic
            console.log('Traffic changed to:', this.value);
        });

        document.getElementById('timeRangeSelect').addEventListener('change', function() {
            // Update charts based on time range
            console.log('Time range changed to:', this.value);
        });

        // Initialize dashboard when page loads
        document.addEventListener('DOMContentLoaded', initDashboard);
    </script>
</body>
</html>